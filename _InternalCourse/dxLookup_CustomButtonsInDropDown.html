<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <!-- https://js.devexpress.com/Documentation/Guide/Getting_Started/Installation/CDN_Services/ -->

    <!-- DevExtreme dependencies -->
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.1.0.js"></script>
    <!-- The AngularJS library -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.js"></script>
    <!-- The Knockout library -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-debug.js"></script>
    <!-- DevExtreme themes -->
    <link rel="stylesheet" type="text/css" href="https://cdn3.devexpress.com/jslib/18.1.3/css/dx.common.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn3.devexpress.com/jslib/18.1.3/css/dx.light.css" />
    <!-- A DevExtreme library -->
    <script type="text/javascript" src="https://cdn3.devexpress.com/jslib/18.1.3/js/dx.all.debug.js"></script>
</head>
<body>
    <pre>
    DevExtreme - Lookup - add new button near the [Cancel] button
            
    Possible approaches:
    
        - https://isc.devexpress.com/Thread/WorkplaceDetails/T274990 - dxLookup - Provide a 'new' button or allow control customization 
        - https://isc.devexpress.com/Thread/WorkplaceDetails/Q371039 - dxLookup - How to customize text of the Cancel button
        - https://isc.devexpress.com/Thread/WorkplaceDetails/T263480 - dxLookup - How to right align the clear button in a dxLookup popup window?
        - this._renderTemplateByType("bottomTemplate"
        - var toolbarItems = this.option("toolbarItems");
        - _getPopupToolbarItems: function() { var toolbarItems = this.option("toolbarItems");
        - _popupConfig: function() {
        - this._setPopupOption("toolbarItems", this._getPopupToolbarItems());
        - https://isc.devexpress.com/Thread/WorkplaceDetails/T627977 - It is possible to stack button of toolbaritems of dxPopup insteadof display it side by side?
        - onPopupInitialized - value of the 'toolbarItems' option entry will be completely overridden
        - Emulate dxlookup with dxpopup/dxlist/dxcheckbox: https://github.com/DevExpress-Examples/how-to-emulate-the-dxlookup-behavior-using-the-dxpopup-dxlist-and-dxcheckbox-widgets-e4750

    'Not supported' answers:
    
        - https://isc.devexpress.com/Thread/WorkplaceDetails/T552835 - dxLookup - Allow adding custom buttons
        - https://isc.devexpress.com/Thread/WorkplaceDetails/T161734 - dxLookup - How to create custom button to replace Clear button?

    <script>
        const products = [ 
            { id: 0, name: 'gas' },
            { id: 1, name: 'petrol' },
            { id: 2, name: 'bush legs' },
        ];
    </script>
    <hr/>
    <p>dxLookup_onPopupInitialized:</p>
    <div class="dxLookup_onPopupInitialized"></div>
    <script>
        (function() {
            const dxLookup = new DevExpress.ui.dxLookup(document.querySelector('.dxLookup_onPopupInitialized'), {
                dataSource: products,
                value: 1,
                valueExpr: 'id',
                displayExpr: 'name',
                showClearButton: true,
                showCancelButton: true,
                onPopupInitialized: (e) => {
                    e.popup.option('toolbarItems', [
                        {
                            widget: "dxButton",
                            options: { 
                                text: "My Button 1", 
                                onClick: function() {
                                    alert('hello 1');
                                },
                            },
                            toolbar: "top",
                            location: "after",
                        },
                        {
                            widget: "dxButton",
                            options: { 
                                text: "My Button 2", 
                                onClick: function() {
                                    alert('hello 2');
                                },
                            },
                            toolbar: "bottom",
                            location: "after",
                        },
                        {
                            widget: "dxButton",
                            options: { 
                                text: "My Button 3", 
                                onClick: function() {
                                    alert('hello 3');
                                },
                            },
                            toolbar: "bottom",
                            location: "center",
                        },
                        ...e.popup.option('toolbarItems')
                    ]);
                }
            });
        })()
    </script>

    <hr/>
    <p>dxLookup__getPopupToolbarItems:</p>
    <div class="dxLookup__getPopupToolbarItems"></div>
    <script>
        (function() {
            const dxLookup = new DevExpress.ui.dxLookup(document.querySelector('.dxLookup__getPopupToolbarItems'), {
                dataSource: products,
                value: 1,
                valueExpr: 'id',
                displayExpr: 'name',
                showClearButton: true,
                showCancelButton: true,
            });
            const _getPopupToolbarItems_base = dxLookup._getPopupToolbarItems;
            dxLookup._getPopupToolbarItems = function() {
                const result  = _getPopupToolbarItems_base.apply(this, arguments);
                const myToolbarItems = [
                    {
                        widget: "dxButton",
                        options: { 
                            text: "My Button 1", 
                            onClick: function() {
                                alert('hello 1');
                            },
                        },
                        toolbar: "top",
                        location: "after",
                    },
                    {
                        widget: "dxButton",
                        options: { 
                            text: "My Button 2", 
                            onClick: function() {
                                alert('hello 2');
                            },
                        },
                        toolbar: "bottom",
                        location: "after",
                    },
                    {
                        widget: "dxButton",
                        options: { 
                            text: "My Button 3", 
                            onClick: function() {
                                alert('hello 3');
                            },
                        },
                        toolbar: "bottom",
                        location: "center",
                    }
                ];
                return [...myToolbarItems, ...result];
            };
        })()
    </script>
</body>
</html>
